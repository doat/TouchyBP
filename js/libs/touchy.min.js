(function(){var A=function(){var D=this,F={};this.addEventListener=function(I,G){var H=F[I];if(!H){F[I]={callbacks:[],enabled:false};H=F[I]}H.callbacks.push(G);if(H.enabled&&H.callOnce){E(G)}};this.dispatchEvent=function(K,I){var H=F[K];if(!H){F[K]={callbacks:[],enabled:true};H=F[K]}else{var G=H.callbacks.length;for(var J=0;J<G;++J){E(H.callbacks[J])}}if(I){l(H,I)}};var E=function(G){G()};this.ready=function(G){D.addEventListener("ready",G)};this.focused=function(G){D.addEventListener("focused",G)};this.blurred=function(G){D.addEventListener("blurred",G)};this.hidden=function(G){D.addEventListener("hidden",G)};this.visible=function(G){D.addEventListener("visible",G)};this.NO_RESULTS="no results";this.RENDER_START="render start";this.RENDER_END="render end";this.RENDER_VISIBLE_END="render visible end";this.SEARCH_START="search request";this.SEARCH_END="search response success";this.SEARCH_ERROR="search response error";this.WINDOW_LOADED="window loaded";this.DOAT_READY="doat ready";this.DOCUMENT_READY="document ready";this.USER_ACTION="user action";this.PAGE_VIEW="page view";this.ready(function(){F.ready.enabled=true});this.focused(function(){F.focused.enabled=true;F.visible.enabled=F.hidden.enabled=F.blurred.enabled=false});this.visible(function(){F.visible.enabled=true;F.focused.enabled=F.hidden.enabled=F.blurred.enabled=false});this.hidden(function(){F.hidden.enabled=true;F.focused.enabled=F.visible.enabled=F.blurred.enabled=false});this.blurred(function(){F.blurred.enabled=true;F.focused.enabled=F.visible.enabled=F.hidden.enabled=false})};function C(I){var O=this,N,L,D=(typeof a!=="undefined")?"doml-orientation-":"orientation-",J=new RegExp(D+"[^s]*","g"),E=I&&I.isTouch||("ontouchstart" in window);window.addEventListener("orientationchange",M,false);window.addEventListener("load",M,false);var F=function(Q){Q=(Q||navigator.userAgent).toLowerCase();N={};N.platform=K(Q);N.browser=G(Q);N.os=P(Q);N.screen=H()};var K=function(S){var T="",R="",Q;Q=/(iphone|ipad)|(android)|(symbian)|(webOSos)|(windows phone os)/.exec(S)||[];T=Q[1]||Q[2]&&""||Q[3]&&"nokia"||Q[4]&&"blackberry"||Q[5]&&""||"desktop";return{name:T,version:R}};var P=function(S){var T="",R="",Q;Q=/(iphone|ipad)|(android|symbian|webos)|(windows phone os)/.exec(S)||[];T=Q[1]&&"ios"||Q[2]||Q[3]&&"windowsphoneos";if(!T){Q=/(Win32)|(Linux)|(MacIntel)/.exec(navigator.platform)||[];T=Q[1]&&"windows"||Q[2]||Q[3]&&"mac"||""}switch(T){case"ios":R=/os\s([\d_]+)\slike/.exec(S);R=R[1].replace(/_/g,".");break;case"android":R=/android\s([\d\.\-]+)[^;]*;/.exec(S);R=R[1].replace(/-/g,"");break}return{name:T,version:R}};var G=function(S){var T,R="",Q;S=S.toLowerCase();Q=/(webkit)[ \/]([\w.]+)/.exec(S)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(S)||/(msie) ([\w.]+)/.exec(S)||S.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(S)||[];T=Q[1]||"";return{name:T,version:R}};var H=function(){var Q="",R="";if(window.innerHeight){Q=window.innerWidth;R=window.innerHeight}else{if(window.screen&&window.screen.availHeight){Q=window.screen.availWidth;R=window.screen.availHeight}}return{width:Q,height:R}};function M(){switch(window.orientation){case 90:o="landscape-right";break;case -90:o="landscape-left";break;default:o="portrait"}document.body.className=document.body.className.replace(J,"")+" "+D+o}this.isTouch=function(){return E};this.isMobile=function(R){var Q=O.getInfo(R).platform.name;return I&&I.isTouch||/^(iphone|ipad|android|symbian|webos|windowsphoneos)$/.test(Q)};this.getInfo=function(){if(arguments[0]||!N){var Q=(arguments[0]===true)?undefined:arguments[0];F(Q)}return N};this.addEventListener=function(){if(typeof arguments[0]==="string"){arguments[2]=arguments[1];arguments[1]=arguments[0];arguments[0]=document}var Q=arguments[0],X=arguments[1],S=arguments[2],V=O.isMobile()?"touchstart":"mousedown",W=O.isMobile()?"touchmove":"mousemove",Y=O.isMobile()?"touchend":"mouseup";switch(X){case"swipeX":r(Q,"swipeX",S);break;case"touch":var U,T,R=false;r(Q,V,function(Z){Z=Z.originalEvent||Z;U={type:"start",position:{x:Z.touches?Z.touches[0].pageX:Z.clientX,y:Z.touches?Z.touches[0].pageY:Z.clientY}};S(Z,U);R=true});r(document,W,function(Z){if(!R){return false}Z=Z.originalEvent||Z;T={type:"move",position:{x:Z.touches?Z.touches[0].pageX:Z.clientX,y:Z.touches?Z.touches[0].pageY:Z.clientY}};T.delta={x:T.position.x-U.position.x,y:T.position.y-U.position.y};S(Z,T)});r(document,Y,function(aa){R=false;if(!T||T.delta.x===0&&T.delta.y===0){return false}aa=aa.originalEvent||aa;var Z={type:"end",position:T.position,delta:T.delta,swipeEvent:true,direction:(T.delta.x>0)?"ltr":"rtl"};S(aa,Z);T=undefined});break}}}function d(){var G="http://doatresizer.appspot.com/?url={src}&width={width}&height={height}&cache=short&crop={crop}",F={searchbar:{type:"replace",html:'<div><form id="doml-searchbar-form" onsubmit="{onsubmit}();Doat.Searchbar.onSubmit();return false;" ><input type="text" value="{defaulttext}" onfocus="Doat.Searchbar.clearValue(\'{defaulttext}\')" onblur="Doat.Searchbar.fillValue(\'{defaulttext}\')" id="doml-searchbar-searchfield" name="searchfield" style="{style}" clearbutton={clearbutton}/></form></div>'},navigate:{type:"replace",html:'<a href="javascript://" class="{class}" onclick="Doat.Navigation.goTo(\'{to}\')"><span>{label}</span></a>'},image:{type:"image",html:'<img src="'+G+'" alt="{alt}" />'}},I="doml",J={autoinit:"false"};var H=/\{([^}]*)\}/g;var D=function(L,M){var K={};return M?(""+M).replace(H,function(N,O){if(!K.hasOwnProperty(O)){K[O]=L.getAttribute(O)?L.getAttribute(O):J.hasOwnProperty(O)?J[O]:""}return K[O]}):M};var E=function(K,M){if($(K).replaceWith){$(K).replaceWith($(M))}else{var L=$(M)[0];K.parentNode.replaceChild(L,K)}};this.parse=function(L){!L&&(L=document.body);for(var O in F){if(F.hasOwnProperty(O)){var K=I+":"+O;var N=L.getElementsByTagName(K);for(var M=0;M<N.length;M++){var P=D(N[M],F[O].html);E(N[M],P);M--}}}};this.getImage=function(K){var L=new function(M){this.getAttribute=function(N){return M[N]}}(K);return D(L,G)}}var b=function(K){var N,F;this.autoinit=O;this.clearValue=I;this.fillValue=M;this.setValue=E;this.getValue=H;this.getInputElement=L;this.onSubmit=J;this.blur=D;this.focus=Q;a.Events.ready(P);function P(){N=document.getElementById("doml-searchbar-searchfield");if(K&&K.searchClearButton){G(K)}}function G(R){if(L().getAttribute("clearbutton")!==""){F=new w();var S=R&&R.css||{};!S.left&&(S.left=N.offsetWidth);buttonEl=F.init({css:S,onClick:function(){E("");Q()}});var T=L().parentNode;T.style.position="relative";T.appendChild(buttonEl)}}function I(R){if(R===""){return}if(H()===R){E("")}}function M(R){if(R===""){return}if(H()===""){E(R)}}function Q(){N.focus()}function D(){N.blur()}function E(R){N.value=R}function H(){return N.value}function L(){return N}function O(R){E(a.getSearchQuery());R.call(this)}function J(){D()}};function w(){var E,D={position:"absolute",top:"5px",cursor:"pointer","background-color":"#BBBBBB",width:"16px",height:"16px","text-align":"center","line-height":"17px","border-radius":"8px","-webkitborder-radius":"8px","-moz-border-radius":"8px",color:"white","font-weight":"bold","font-size":"12px","font-family":"arial","text-shadow":"none",leftOffset:-19};this.init=function(F){for(i in F.css){D[i]=F.css[i]}D.left=D.left+D.leftOffset+"px";E=$("<span/>");E.addClass("doml-searchbar-clear").html("X").css(D).click(function(G){G.preventDefault();F.onClick()});return E[0]};this.show=function(){E.show()};this.hide=function(){E.hide()}}var q=function(){var X,M,V,U,Q,O,W,J,N,K,E,S,P;this.init=function(aa){var ad;if(aa&&aa.id&&document.getElementById(aa.id)){ad=$("#"+aa.id)}else{return false}if(typeof a!=="undefined"){M=a.Env.isMobile();var Z=a.Env.getInfo().browser;V=Z==="webkit"?"-webkit-":Z==="mozilla"?"-moz-":""}else{M=true}K=aa.trackWidth;P=aa.onSelect;W=M?"touchstart":"mousedown";J=M?"touchmove":"mousemove";N=M?"touchend":"mouseup";X=$('<div class="doml-slider" />');ad.parent().append(X);X.append(ad);var ae=[];ad.children().each(function(){var af=$("<div/>");$(this).appendTo(af);ae.push(af.html())});itemArrLength=ae.length;S=K/itemArrLength;var Y=$('<div class="wrapper">');Y.css("width",K+"px");X.append(Y);$eventCaptureEl=$('<div class="eventCapture" />');$eventCaptureEl.css("width",K+"px");$eventCaptureEl.bind(W,H,false);document.addEventListener(N,D,false);Y.append($eventCaptureEl);handleWrapper=new R();var ab=handleWrapper.init();Y.append(ab);O=new G();var ac=O.init(ae);ab.append(ac);return true};var H=function(Z){document.addEventListener(J,I,false);var aa=T(Z);var Y=F(aa);if(Y!==E){E=Y;O.update(E)}handleWrapper.update(aa,E);O.show()};var I=function(Z){Z.preventDefault(Z);var aa=T(Z);if(aa<=K&&aa>=0){var Y=F(aa);if(Y!==E){E=Y;O.update(E)}handleWrapper.onTouchMove();handleWrapper.update(aa,E)}};var D=function(Y){handleWrapper.onTouchEnd();document.removeEventListener(J,I);var Z=L(E);handleWrapper.update(Z);O.hide();if(P){P(E)}};var F=function(Z){var Y=(Z/K)*itemArrLength;Y=parseInt(Y,10);return Y};var T=function(Y){Y=Y.touches&&Y.touches[0]||Y.originalEvent&&Y.originalEvent.touches&&Y.originalEvent.touches[0]||Y;return Y.clientX};var L=function(Y){return Y*S};function R(){var Y;this.init=function(aa){Y=$('<div class="handle_wrapper"><div class="handle"/></div>');return Y};this.update=function(aa){Z(aa)};this.onTouchMove=function(){Y.addClass("dragged")};this.onTouchEnd=function(){Y.removeClass("dragged")};var Z=function(aa){Y.css(V+"transform","translateX("+aa+"px)")}}function G(){var Z=this;var aa,Y,ac,ab;this.init=function(ad){ab=ad;aa=$('<div class="preview"/>');Y=$('<div class="content"/>');aa.append(Y);ac=$('<span class="indicator"/>');aa.append(ac);Z.hide();return aa};this.show=function(){aa.addClass("displayed")};this.update=function(ad){Y.html(ab[ad]);ac.html(ad+1+" of "+ab.length)};this.hide=function(){aa.removeClass("displayed")}}};function B(){var Z=null,N=null,L=null,P=null;var O=0,M=0,K=false,I=true,J=false;var D=320,H=0,T=5,W=0,F=null;var X="0.5",E=4000;var Q=this;this.init=function(ab){ab=ab||{};Z=ab.element||null;N=ab.navElement||null;L=ab.itemsElement||null;P=ab.onSelect||null;ab.itemWidth&&(D=ab.itemWidth);ab.thumbWidth&&(H=ab.thumbWidth);ab.numVisibleThumbs&&(T=ab.numVisibleThumbs);ab.animationSpeed&&(X=ab.animationSpeed);ab.autoplay&&(typeof ab.autoplay=="number")&&(E=ab.autoplay);I=(typeof ab.stopAutoplayOnTouch=="boolean")?ab.stopAutoplayOnTouch:true;J=(typeof ab.thumbsSwipe=="boolean")?ab.thumbsSwipe:false;onHitStartArr=[],onHitEndArr=[],onHitStart=function(){onHitStartArr.forEach(function(ac){ac.apply(arguments)})};onHitEnd=function(){onHitEndArr.forEach(function(ac){ac.apply(arguments)})};ab.onHitStartCallback&&onHitStartArr.push(ab.onHitStartCallback);ab.onHitEndCallback&&onHitEndArr.push(ab.onHitEndCallback);W=L.find("li").length;R();S();if(N){var aa=N.find("li");aa.click(function(){Q.setItemByThumb(this)});$(aa[0]).addClass("active")}V();if(ab.autoplay){Q.autoplayStart();if(ab.stopAutoplayOnFocus){a.Events.focused(function(){Q.autoplayStop()});a.Events.blurred(function(){Q.autoplayStart()})}}};function S(){var aa=L.parent().get(0);a.Env.addEventListener(aa,"touch",function(ac,ab){switch(ab.type){case"start":Y(L);I&&Q.autoplayStop();break;case"move":Q.move(ab.delta.x);break;case"end":if(!ab.swipeEvent){Q.showCurrentItem()}else{ac=ac.originalEvent||ac;ac.preventDefault();G(L);if(ab.direction=="rtl"){Q.next()}else{Q.prev()}}break}});if(N&&J){aa=N.parent().get(0);a.Env.addEventListener(aa,"touch",function(ac,ab){switch(ab.type){case"start":Y(N);I&&Q.autoplayStop();break;case"move":Q.moveTabs(ab.delta.x);break;case"end":if(!ab.swipeEvent){Q.showCurrentItem(true)}else{ac=ac.originalEvent||ac;ac.preventDefault();G(N);if(ab.direction=="rtl"){Q.nextTabs()}else{Q.prevTabs()}}break}})}$(document).bind("keyup",function(ab){if(K){switch(ab.keyCode){case 36:I&&Q.autoplayStop();Q.setItem(0);break;case 35:I&&Q.autoplayStop();Q.setItem(W-1);break;case 39:I&&Q.autoplayStop();Q.next();break;case 37:I&&Q.autoplayStop();Q.prev();break}}})}function R(){U(Z);U(N);U(L);L.parent().css({width:D+"px",overflow:"hidden"});L.find("li").css({"float":"left",width:D+"px"});L.css({width:(D*W)+"px","list-style-type":"none",overflow:"hidden"});if(N&&H!==0){N.css({width:(H*W)+"px","list-style-type":"none",overflow:"hidden"})}}this.autoplayStart=function(){if(F!==null){Q.autoplayStop()}F=setInterval(function(){Q.next(true)},E)};this.autoplayStop=function(){clearInterval(F);F=null};this.show=function(aa){if(aa&&aa.delay){setTimeout(V,aa.delay)}else{V()}};this.hide=function(){Z.hide();K=false};function V(){Z.show();K=true}this.removeItem=function(ac){var ab=(typeof ac=="number")?L.children()[ac]:ac;var aa=Q.index(ab);$(ab).remove();N&&$(N.children()[aa]).remove();W--;if(O==aa){O--;if(O<=0){O=0}}Q.showCurrentItem()};this.move=function(aa){L.css({"-webkit-transform":"translate("+-(O*D-aa)+"px)","-moz-transform":"translate("+-(O*D-aa)+"px)",transform:"translate("+-(O*D-aa)+"px)"})};this.moveTabs=function(aa){N&&N.css({"-webkit-transform":"translate("+-(M*H-aa)+"px)","-moz-transform":"translate("+-(M*H-aa)+"px)",transform:"translate("+-(M*H-aa)+"px)"})};this.prev=function(){O--;if(O<0){O=0;onHitStart()}Q.showCurrentItem()};this.next=function(aa){O++;if(O==W){O=(aa)?0:W-1;onHitEnd()}Q.showCurrentItem()};this.prevTabs=function(){M-=T;if(M<=0){M=0}Q.showCurrentItem(true)};this.nextTabs=function(){M+=T;if(M>=W-T){M=W-T}Q.showCurrentItem(true)};this.setItemByThumb=function(aa){Q.setItem(Q.index(aa))};this.index=function(ac){ac=$(ac);var aa=ac.parent().children();for(var ab=0;ab<aa.length;ab++){if(aa[ab]==ac[0]){return ab}}return -1};this.setItem=function(aa){O=aa;Q.showCurrentItem()};this.showCurrentItem=function(ad){var ac=(ad&&N)?N:L;var aa=(ad&&N)?-(M*H):-(O*D);G(ac);ac.css({"-webkit-transform":"translate("+aa+"px)","-moz-transform":"translate("+aa+"px)",transform:"translate("+aa+"px)"});P&&P(O);L.find(".active").removeClass("active");$(L.children("li")[O]).addClass("active");if(N){N.find(".active").removeClass("active");$(N.children("li")[O]).addClass("active")}if(!ad){var ab=Math.floor(O/T)*T;if(ab!=M){M=ab;Q.showCurrentItem(true)}}};function Y(aa){aa.css({"-moz-transition":"-moz-transform 0s","-webkit-transition":"-webkit-transform 0s",transition:"transform 0s"})}function G(aa){aa&&aa.css({"-moz-transition":" -moz-transform "+X+"s ease-out","-webkit-transition":"-webkit-transform "+X+"s ease-out",transition:"transform "+X+"s ease-out"})}function U(aa){aa&&aa.css({"-webkit-transform":"translate3d(0px, 0px, 0px) rotate(0deg) scale(1)","-webkit-box-sizing":"border-box","-webkit-backface-visibility":"hidden"})}}
/*!
 * iScroll v4.1.9 ~ Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
(function(){var R=Math,V=(/webkit/i).test(navigator.appVersion)?"webkit":(/firefox/i).test(navigator.userAgent)?"Moz":"opera" in window?"O":"",M="WebKitCSSMatrix" in window&&"m11" in new WebKitCSSMatrix(),U="ontouchstart" in window,H=V+"Transform" in document.documentElement.style,W=(/android/gi).test(navigator.appVersion),K=(/iphone|ipad/gi).test(navigator.appVersion),F=(/playbook/gi).test(navigator.appVersion),I=K||F,O=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(X){return setTimeout(X,1)}})(),N=(function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout})(),J="onorientationchange" in window?"orientationchange":"resize",E=U?"touchstart":"mousedown",P=U?"touchmove":"mousemove",G=U?"touchend":"mouseup",T=U?"touchcancel":"mouseup",Q=V=="Moz"?"DOMMouseScroll":"mousewheel",D="translate"+(M?"3d(":"("),L=M?",0)":")",S=function(Z,X){var aa=this,ab=document,Y;aa.wrapper=typeof Z=="object"?Z:ab.getElementById(Z);aa.wrapper.style.overflow="hidden";aa.scroller=aa.wrapper.children[0];aa.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,hScrollbar:true,vScrollbar:true,fixedScrollbar:W,hideScrollbar:K,fadeScrollbar:K&&M,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(ac){ac.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(Y in X){aa.options[Y]=X[Y]}aa.x=aa.options.x;aa.y=aa.options.y;aa.options.useTransform=H?aa.options.useTransform:false;aa.options.hScrollbar=aa.options.hScroll&&aa.options.hScrollbar;aa.options.vScrollbar=aa.options.vScroll&&aa.options.vScrollbar;aa.options.zoom=aa.options.useTransform&&aa.options.zoom;aa.options.useTransition=I&&aa.options.useTransition;aa.scroller.style[V+"TransitionProperty"]=aa.options.useTransform?"-"+V.toLowerCase()+"-transform":"top left";aa.scroller.style[V+"TransitionDuration"]="0";aa.scroller.style[V+"TransformOrigin"]="0 0";if(aa.options.useTransition){aa.scroller.style[V+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"}if(aa.options.useTransform){aa.scroller.style[V+"Transform"]=D+aa.x+"px,"+aa.y+"px"+L}else{aa.scroller.style.cssText+=";position:absolute;top:"+aa.y+"px;left:"+aa.x+"px"}if(aa.options.useTransition){aa.options.fixedScrollbar=true}aa.refresh();aa._bind(J,window);aa._bind(E);if(!U){aa._bind("mouseout",aa.wrapper);aa._bind(Q)}if(aa.options.checkDOMChanges){aa.checkDOMTime=setInterval(function(){aa._checkDOMChanges()},500)}};S.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(Y){var X=this;switch(Y.type){case E:if(!U&&Y.button!==0){return}X._start(Y);break;case P:X._move(Y);break;case G:case T:X._end(Y);break;case J:X._resize();break;case Q:X._wheel(Y);break;case"mouseout":X._mouseout(Y);break;case"webkitTransitionEnd":X._transitionEnd(Y);break}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||(this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)){return}this.refresh()},_scrollbar:function(X){var Z=this,aa=document,Y;if(!Z[X+"Scrollbar"]){if(Z[X+"ScrollbarWrapper"]){if(H){Z[X+"ScrollbarIndicator"].style[V+"Transform"]=""}Z[X+"ScrollbarWrapper"].parentNode.removeChild(Z[X+"ScrollbarWrapper"]);Z[X+"ScrollbarWrapper"]=null;Z[X+"ScrollbarIndicator"]=null}return}if(!Z[X+"ScrollbarWrapper"]){Y=aa.createElement("div");if(Z.options.scrollbarClass){Y.className=Z.options.scrollbarClass+X.toUpperCase()}else{Y.style.cssText="position:absolute;z-index:100;"+(X=="h"?"height:7px;bottom:1px;left:2px;right:"+(Z.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(Z.hScrollbar?"7":"2")+"px;top:2px;right:1px")}Y.style.cssText+=";pointer-events:none;-"+V+"-transition-property:opacity;-"+V+"-transition-duration:"+(Z.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(Z.options.hideScrollbar?"0":"1");Z.wrapper.appendChild(Y);Z[X+"ScrollbarWrapper"]=Y;Y=aa.createElement("div");if(!Z.options.scrollbarClass){Y.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-"+V+"-background-clip:padding-box;-"+V+"-box-sizing:border-box;"+(X=="h"?"height:100%":"width:100%")+";-"+V+"-border-radius:3px;border-radius:3px"}Y.style.cssText+=";pointer-events:none;-"+V+"-transition-property:-"+V+"-transform;-"+V+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+V+"-transition-duration:0;-"+V+"-transform:"+D+"0,0"+L;if(Z.options.useTransition){Y.style.cssText+=";-"+V+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"}Z[X+"ScrollbarWrapper"].appendChild(Y);Z[X+"ScrollbarIndicator"]=Y}if(X=="h"){Z.hScrollbarSize=Z.hScrollbarWrapper.clientWidth;Z.hScrollbarIndicatorSize=R.max(R.round(Z.hScrollbarSize*Z.hScrollbarSize/Z.scrollerW),8);Z.hScrollbarIndicator.style.width=Z.hScrollbarIndicatorSize+"px";Z.hScrollbarMaxScroll=Z.hScrollbarSize-Z.hScrollbarIndicatorSize;Z.hScrollbarProp=Z.hScrollbarMaxScroll/Z.maxScrollX}else{Z.vScrollbarSize=Z.vScrollbarWrapper.clientHeight;Z.vScrollbarIndicatorSize=R.max(R.round(Z.vScrollbarSize*Z.vScrollbarSize/Z.scrollerH),8);Z.vScrollbarIndicator.style.height=Z.vScrollbarIndicatorSize+"px";Z.vScrollbarMaxScroll=Z.vScrollbarSize-Z.vScrollbarIndicatorSize;Z.vScrollbarProp=Z.vScrollbarMaxScroll/Z.maxScrollY}Z._scrollbarPos(X,true)},_resize:function(){var X=this;setTimeout(function(){X.refresh()},W?200:0)},_pos:function(X,Y){X=this.hScroll?X:0;Y=this.vScroll?Y:0;if(this.options.useTransform){this.scroller.style[V+"Transform"]=D+X+"px,"+Y+"px"+L+" scale("+this.scale+")"}else{X=R.round(X);Y=R.round(Y);this.scroller.style.left=X+"px";this.scroller.style.top=Y+"px"}this.x=X;this.y=Y;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(X,aa){var Z=this,ab=X=="h"?Z.x:Z.y,Y;if(!Z[X+"Scrollbar"]){return}ab=Z[X+"ScrollbarProp"]*ab;if(ab<0){if(!Z.options.fixedScrollbar){Y=Z[X+"ScrollbarIndicatorSize"]+R.round(ab*3);if(Y<8){Y=8}Z[X+"ScrollbarIndicator"].style[X=="h"?"width":"height"]=Y+"px"}ab=0}else{if(ab>Z[X+"ScrollbarMaxScroll"]){if(!Z.options.fixedScrollbar){Y=Z[X+"ScrollbarIndicatorSize"]-R.round((ab-Z[X+"ScrollbarMaxScroll"])*3);if(Y<8){Y=8}Z[X+"ScrollbarIndicator"].style[X=="h"?"width":"height"]=Y+"px";ab=Z[X+"ScrollbarMaxScroll"]+(Z[X+"ScrollbarIndicatorSize"]-Y)}else{ab=Z[X+"ScrollbarMaxScroll"]}}}Z[X+"ScrollbarWrapper"].style[V+"TransitionDelay"]="0";Z[X+"ScrollbarWrapper"].style.opacity=aa&&Z.options.hideScrollbar?"0":"1";Z[X+"ScrollbarIndicator"].style[V+"Transform"]=D+(X=="h"?ab+"px,0":"0,"+ab+"px")+L},_start:function(ad){var ac=this,Y=U?ad.touches[0]:ad,Z,X,ae,ab,aa;if(!ac.enabled){return}if(ac.options.onBeforeScrollStart){ac.options.onBeforeScrollStart.call(ac,ad)}if(ac.options.useTransition||ac.options.zoom){ac._transitionTime(0)}ac.moved=false;ac.animating=false;ac.zoomed=false;ac.distX=0;ac.distY=0;ac.absDistX=0;ac.absDistY=0;ac.dirX=0;ac.dirY=0;if(ac.options.zoom&&U&&ad.touches.length>1){ab=R.abs(ad.touches[0].pageX-ad.touches[1].pageX);aa=R.abs(ad.touches[0].pageY-ad.touches[1].pageY);ac.touchesDistStart=R.sqrt(ab*ab+aa*aa);ac.originX=R.abs(ad.touches[0].pageX+ad.touches[1].pageX-ac.wrapperOffsetLeft*2)/2-ac.x;ac.originY=R.abs(ad.touches[0].pageY+ad.touches[1].pageY-ac.wrapperOffsetTop*2)/2-ac.y;if(ac.options.onZoomStart){ac.options.onZoomStart.call(ac,ad)}}if(ac.options.momentum){if(ac.options.useTransform){Z=getComputedStyle(ac.scroller,null)[V+"Transform"].replace(/[^0-9-.,]/g,"").split(",");X=Z[4]*1;ae=Z[5]*1}else{X=getComputedStyle(ac.scroller,null).left.replace(/[^0-9-]/g,"")*1;ae=getComputedStyle(ac.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(X!=ac.x||ae!=ac.y){if(ac.options.useTransition){ac._unbind("webkitTransitionEnd")}else{N(ac.aniTime)}ac.steps=[];ac._pos(X,ae)}}ac.absStartX=ac.x;ac.absStartY=ac.y;ac.startX=ac.x;ac.startY=ac.y;ac.pointX=Y.pageX;ac.pointY=Y.pageY;ac.startTime=ad.timeStamp||Date.now();if(ac.options.onScrollStart){ac.options.onScrollStart.call(ac,ad)}ac._bind(P);ac._bind(G);ac._bind(T)},_move:function(af){var ad=this,ag=U?af.touches[0]:af,ab=ag.pageX-ad.pointX,Z=ag.pageY-ad.pointY,X=ad.x+ab,ah=ad.y+Z,ac,aa,Y,ae=af.timeStamp||Date.now();if(ad.options.onBeforeScrollMove){ad.options.onBeforeScrollMove.call(ad,af)}if(ad.options.zoom&&U&&af.touches.length>1){ac=R.abs(af.touches[0].pageX-af.touches[1].pageX);aa=R.abs(af.touches[0].pageY-af.touches[1].pageY);ad.touchesDist=R.sqrt(ac*ac+aa*aa);ad.zoomed=true;Y=1/ad.touchesDistStart*ad.touchesDist*this.scale;if(Y<ad.options.zoomMin){Y=0.5*ad.options.zoomMin*Math.pow(2,Y/ad.options.zoomMin)}else{if(Y>ad.options.zoomMax){Y=2*ad.options.zoomMax*Math.pow(0.5,ad.options.zoomMax/Y)}}ad.lastScale=Y/this.scale;X=this.originX-this.originX*ad.lastScale+this.x,ah=this.originY-this.originY*ad.lastScale+this.y;this.scroller.style[V+"Transform"]=D+X+"px,"+ah+"px"+L+" scale("+Y+")";if(ad.options.onZoom){ad.options.onZoom.call(ad,af)}return}ad.pointX=ag.pageX;ad.pointY=ag.pageY;if(X>0||X<ad.maxScrollX){X=ad.options.bounce?ad.x+(ab/2):X>=0||ad.maxScrollX>=0?0:ad.maxScrollX}if(ah>ad.minScrollY||ah<ad.maxScrollY){ah=ad.options.bounce?ad.y+(Z/2):ah>=ad.minScrollY||ad.maxScrollY>=0?ad.minScrollY:ad.maxScrollY}if(ad.absDistX<6&&ad.absDistY<6){ad.distX+=ab;ad.distY+=Z;ad.absDistX=R.abs(ad.distX);ad.absDistY=R.abs(ad.distY);return}if(ad.options.lockDirection){if(ad.absDistX>ad.absDistY+5){ah=ad.y;Z=0}else{if(ad.absDistY>ad.absDistX+5){X=ad.x;ab=0}}}ad.moved=true;ad._pos(X,ah);ad.dirX=ab>0?-1:ab<0?1:0;ad.dirY=Z>0?-1:Z<0?1:0;if(ae-ad.startTime>300){ad.startTime=ae;ad.startX=ad.x;ad.startY=ad.y}if(ad.options.onScrollMove){ad.options.onScrollMove.call(ad,af)}},_end:function(af){if(U&&af.touches.length!=0){return}var ad=this,al=U?af.changedTouches[0]:af,ag,ak,Z={dist:0,time:0},X={dist:0,time:0},ac=(af.timeStamp||Date.now())-ad.startTime,ah=ad.x,ae=ad.y,aj,ai,Y,ab,aa;ad._unbind(P);ad._unbind(G);ad._unbind(T);if(ad.options.onBeforeScrollEnd){ad.options.onBeforeScrollEnd.call(ad,af)}if(ad.zoomed){aa=ad.scale*ad.lastScale;aa=Math.max(ad.options.zoomMin,aa);aa=Math.min(ad.options.zoomMax,aa);ad.lastScale=aa/ad.scale;ad.scale=aa;ad.x=ad.originX-ad.originX*ad.lastScale+ad.x;ad.y=ad.originY-ad.originY*ad.lastScale+ad.y;ad.scroller.style[V+"TransitionDuration"]="200ms";ad.scroller.style[V+"Transform"]=D+ad.x+"px,"+ad.y+"px"+L+" scale("+ad.scale+")";ad.zoomed=false;ad.refresh();if(ad.options.onZoomEnd){ad.options.onZoomEnd.call(ad,af)}return}if(!ad.moved){if(U){if(ad.doubleTapTimer&&ad.options.zoom){clearTimeout(ad.doubleTapTimer);ad.doubleTapTimer=null;if(ad.options.onZoomStart){ad.options.onZoomStart.call(ad,af)}ad.zoom(ad.pointX,ad.pointY,ad.scale==1?ad.options.doubleTapZoom:1);if(ad.options.onZoomEnd){setTimeout(function(){ad.options.onZoomEnd.call(ad,af)},200)}}else{ad.doubleTapTimer=setTimeout(function(){ad.doubleTapTimer=null;ag=al.target;while(ag.nodeType!=1){ag=ag.parentNode}if(ag.tagName!="SELECT"&&ag.tagName!="INPUT"&&ag.tagName!="TEXTAREA"){ak=document.createEvent("MouseEvents");ak.initMouseEvent("click",true,true,af.view,1,al.screenX,al.screenY,al.clientX,al.clientY,af.ctrlKey,af.altKey,af.shiftKey,af.metaKey,0,null);ak._fake=true;ag.dispatchEvent(ak)}},ad.options.zoom?250:0)}}ad._resetPos(200);if(ad.options.onTouchEnd){ad.options.onTouchEnd.call(ad,af)}return}if(ac<300&&ad.options.momentum){Z=ah?ad._momentum(ah-ad.startX,ac,-ad.x,ad.scrollerW-ad.wrapperW+ad.x,ad.options.bounce?ad.wrapperW:0):Z;X=ae?ad._momentum(ae-ad.startY,ac,-ad.y,(ad.maxScrollY<0?ad.scrollerH-ad.wrapperH+ad.y-ad.minScrollY:0),ad.options.bounce?ad.wrapperH:0):X;ah=ad.x+Z.dist;ae=ad.y+X.dist;if((ad.x>0&&ah>0)||(ad.x<ad.maxScrollX&&ah<ad.maxScrollX)){Z={dist:0,time:0}}if((ad.y>ad.minScrollY&&ae>ad.minScrollY)||(ad.y<ad.maxScrollY&&ae<ad.maxScrollY)){X={dist:0,time:0}}}if(Z.dist||X.dist){Y=R.max(R.max(Z.time,X.time),10);if(ad.options.snap){aj=ah-ad.absStartX;ai=ae-ad.absStartY;if(R.abs(aj)<ad.options.snapThreshold&&R.abs(ai)<ad.options.snapThreshold){ad.scrollTo(ad.absStartX,ad.absStartY,200)}else{ab=ad._snap(ah,ae);ah=ab.x;ae=ab.y;Y=R.max(ab.time,Y)}}ad.scrollTo(R.round(ah),R.round(ae),Y);if(ad.options.onTouchEnd){ad.options.onTouchEnd.call(ad,af)}return}if(ad.options.snap){aj=ah-ad.absStartX;ai=ae-ad.absStartY;if(R.abs(aj)<ad.options.snapThreshold&&R.abs(ai)<ad.options.snapThreshold){ad.scrollTo(ad.absStartX,ad.absStartY,200)}else{ab=ad._snap(ad.x,ad.y);if(ab.x!=ad.x||ab.y!=ad.y){ad.scrollTo(ab.x,ab.y,ab.time)}}if(ad.options.onTouchEnd){ad.options.onTouchEnd.call(ad,af)}return}ad._resetPos(200);if(ad.options.onTouchEnd){ad.options.onTouchEnd.call(ad,af)}},_resetPos:function(Z){var X=this,aa=X.x>=0?0:X.x<X.maxScrollX?X.maxScrollX:X.x,Y=X.y>=X.minScrollY||X.maxScrollY>0?X.minScrollY:X.y<X.maxScrollY?X.maxScrollY:X.y;if(aa==X.x&&Y==X.y){if(X.moved){X.moved=false;if(X.options.onScrollEnd){X.options.onScrollEnd.call(X)}}if(X.hScrollbar&&X.options.hideScrollbar){if(V=="webkit"){X.hScrollbarWrapper.style[V+"TransitionDelay"]="300ms"}X.hScrollbarWrapper.style.opacity="0"}if(X.vScrollbar&&X.options.hideScrollbar){if(V=="webkit"){X.vScrollbarWrapper.style[V+"TransitionDelay"]="300ms"}X.vScrollbarWrapper.style.opacity="0"}return}X.scrollTo(aa,Y,Z||0)},_wheel:function(ac){var aa=this,ab,Z,Y,X,ad;if("wheelDeltaX" in ac){ab=ac.wheelDeltaX/12;Z=ac.wheelDeltaY/12}else{if("detail" in ac){ab=Z=-ac.detail*3}else{ab=Z=-ac.wheelDelta}}if(aa.options.wheelAction=="zoom"){ad=aa.scale*Math.pow(2,1/3*(Z?Z/Math.abs(Z):0));if(ad<aa.options.zoomMin){ad=aa.options.zoomMin}if(ad>aa.options.zoomMax){ad=aa.options.zoomMax}if(ad!=aa.scale){if(!aa.wheelZoomCount&&aa.options.onZoomStart){aa.options.onZoomStart.call(aa,ac)}aa.wheelZoomCount++;aa.zoom(ac.pageX,ac.pageY,ad,400);setTimeout(function(){aa.wheelZoomCount--;if(!aa.wheelZoomCount&&aa.options.onZoomEnd){aa.options.onZoomEnd.call(aa,ac)}},400)}return}Y=aa.x+ab;X=aa.y+Z;if(Y>0){Y=0}else{if(Y<aa.maxScrollX){Y=aa.maxScrollX}}if(X>aa.minScrollY){X=aa.minScrollY}else{if(X<aa.maxScrollY){X=aa.maxScrollY}}aa.scrollTo(Y,X,0)},_mouseout:function(Y){var X=Y.relatedTarget;if(!X){this._end(Y);return}while(X=X.parentNode){if(X==this.wrapper){return}}this._end(Y)},_transitionEnd:function(Y){var X=this;if(Y.target!=X.scroller){return}X._unbind("webkitTransitionEnd");X._startAni()},_startAni:function(){var ad=this,Y=ad.x,X=ad.y,ab=Date.now(),ac,aa,Z;if(ad.animating){return}if(!ad.steps.length){ad._resetPos(400);return}ac=ad.steps.shift();if(ac.x==Y&&ac.y==X){ac.time=0}ad.animating=true;ad.moved=true;if(ad.options.useTransition){ad._transitionTime(ac.time);ad._pos(ac.x,ac.y);ad.animating=false;if(ac.time){ad._bind("webkitTransitionEnd")}else{ad._resetPos(0)}return}Z=function(){var ae=Date.now(),ag,af;if(ae>=ab+ac.time){ad._pos(ac.x,ac.y);ad.animating=false;if(ad.options.onAnimationEnd){ad.options.onAnimationEnd.call(ad)}ad._startAni();return}ae=(ae-ab)/ac.time-1;aa=R.sqrt(1-ae*ae);ag=(ac.x-Y)*aa+Y;af=(ac.y-X)*aa+X;ad._pos(ag,af);if(ad.animating){ad.aniTime=O(Z)}};Z()},_transitionTime:function(X){X+="ms";this.scroller.style[V+"TransitionDuration"]=X;if(this.hScrollbar){this.hScrollbarIndicator.style[V+"TransitionDuration"]=X}if(this.vScrollbar){this.vScrollbarIndicator.style[V+"TransitionDuration"]=X}},_momentum:function(ae,Y,ac,X,ag){var ad=0.0006,Z=R.abs(ae)/Y,aa=(Z*Z)/(2*ad),af=0,ab=0;if(ae>0&&aa>ac){ab=ag/(6/(aa/Z*ad));ac=ac+ab;Z=Z*ac/aa;aa=ac}else{if(ae<0&&aa>X){ab=ag/(6/(aa/Z*ad));X=X+ab;Z=Z*X/aa;aa=X}}aa=aa*(ae<0?-1:1);af=Z/ad;return{dist:aa,time:R.round(af)}},_offset:function(X){var Z=-X.offsetLeft,Y=-X.offsetTop;while(X=X.offsetParent){Z-=X.offsetLeft;Y-=X.offsetTop}if(X!=this.wrapper){Z*=this.scale;Y*=this.scale}return{left:Z,top:Y}},_snap:function(af,ae){var ac=this,ab,aa,ad,Z,Y,X;ad=ac.pagesX.length-1;for(ab=0,aa=ac.pagesX.length;ab<aa;ab++){if(af>=ac.pagesX[ab]){ad=ab;break}}if(ad==ac.currPageX&&ad>0&&ac.dirX<0){ad--}af=ac.pagesX[ad];Y=R.abs(af-ac.pagesX[ac.currPageX]);Y=Y?R.abs(ac.x-af)/Y*500:0;ac.currPageX=ad;ad=ac.pagesY.length-1;for(ab=0;ab<ad;ab++){if(ae>=ac.pagesY[ab]){ad=ab;break}}if(ad==ac.currPageY&&ad>0&&ac.dirY<0){ad--}ae=ac.pagesY[ad];X=R.abs(ae-ac.pagesY[ac.currPageY]);X=X?R.abs(ac.y-ae)/X*500:0;ac.currPageY=ad;Z=R.round(R.max(Y,X))||200;return{x:af,y:ae,time:Z}},_bind:function(Z,Y,X){(Y||this.scroller).addEventListener(Z,this,!!X)},_unbind:function(Z,Y,X){(Y||this.scroller).removeEventListener(Z,this,!!X)},destroy:function(){var X=this;X.scroller.style[V+"Transform"]="";X.hScrollbar=false;X.vScrollbar=false;X._scrollbar("h");X._scrollbar("v");X._unbind(J,window);X._unbind(E);X._unbind(P);X._unbind(G);X._unbind(T);if(X.options.hasTouch){X._unbind("mouseout",X.wrapper);X._unbind(Q)}if(X.options.useTransition){X._unbind("webkitTransitionEnd")}if(X.options.checkDOMChanges){clearInterval(X.checkDOMTime)}if(X.options.onDestroy){X.options.onDestroy.call(X)}},refresh:function(){var aa=this,ac,Z,X,Y,ad=0,ab=0;if(aa.scale<aa.options.zoomMin){aa.scale=aa.options.zoomMin}aa.wrapperW=aa.wrapper.clientWidth||1;aa.wrapperH=aa.wrapper.clientHeight||1;aa.minScrollY=-aa.options.topOffset||0;aa.scrollerW=R.round(aa.scroller.offsetWidth*aa.scale);aa.scrollerH=R.round((aa.scroller.offsetHeight+aa.minScrollY)*aa.scale);aa.maxScrollX=aa.wrapperW-aa.scrollerW;aa.maxScrollY=aa.wrapperH-aa.scrollerH+aa.minScrollY;aa.dirX=0;aa.dirY=0;if(aa.options.onRefresh){aa.options.onRefresh.call(aa)}aa.hScroll=aa.options.hScroll&&aa.maxScrollX<0;aa.vScroll=aa.options.vScroll&&(!aa.options.bounceLock&&!aa.hScroll||aa.scrollerH>aa.wrapperH);aa.hScrollbar=aa.hScroll&&aa.options.hScrollbar;aa.vScrollbar=aa.vScroll&&aa.options.vScrollbar&&aa.scrollerH>aa.wrapperH;ac=aa._offset(aa.wrapper);aa.wrapperOffsetLeft=-ac.left;aa.wrapperOffsetTop=-ac.top;if(typeof aa.options.snap=="string"){aa.pagesX=[];aa.pagesY=[];Y=aa.scroller.querySelectorAll(aa.options.snap);for(Z=0,X=Y.length;Z<X;Z++){ad=aa._offset(Y[Z]);ad.left+=aa.wrapperOffsetLeft;ad.top+=aa.wrapperOffsetTop;aa.pagesX[Z]=ad.left<aa.maxScrollX?aa.maxScrollX:ad.left*aa.scale;aa.pagesY[Z]=ad.top<aa.maxScrollY?aa.maxScrollY:ad.top*aa.scale}}else{if(aa.options.snap){aa.pagesX=[];while(ad>=aa.maxScrollX){aa.pagesX[ab]=ad;ad=ad-aa.wrapperW;ab++}if(aa.maxScrollX%aa.wrapperW){aa.pagesX[aa.pagesX.length]=aa.maxScrollX-aa.pagesX[aa.pagesX.length-1]+aa.pagesX[aa.pagesX.length-1]}ad=0;ab=0;aa.pagesY=[];while(ad>=aa.maxScrollY){aa.pagesY[ab]=ad;ad=ad-aa.wrapperH;ab++}if(aa.maxScrollY%aa.wrapperH){aa.pagesY[aa.pagesY.length]=aa.maxScrollY-aa.pagesY[aa.pagesY.length-1]+aa.pagesY[aa.pagesY.length-1]}}}aa._scrollbar("h");aa._scrollbar("v");if(!aa.zoomed){aa.scroller.style[V+"TransitionDuration"]="0";aa._resetPos(200)}},scrollTo:function(X,ae,ad,ac){var ab=this,aa=X,Z,Y;ab.stop();if(!aa.length){aa=[{x:X,y:ae,time:ad,relative:ac}]}for(Z=0,Y=aa.length;Z<Y;Z++){if(aa[Z].relative){aa[Z].x=ab.x-aa[Z].x;aa[Z].y=ab.y-aa[Z].y}ab.steps.push({x:aa[Z].x,y:aa[Z].y,time:aa[Z].time||0})}ab._startAni()},scrollToElement:function(X,Z){var Y=this,aa;X=X.nodeType?X:Y.scroller.querySelector(X);if(!X){return}aa=Y._offset(X);aa.left+=Y.wrapperOffsetLeft;aa.top+=Y.wrapperOffsetTop;aa.left=aa.left>0?0:aa.left<Y.maxScrollX?Y.maxScrollX:aa.left;aa.top=aa.top>Y.minScrollY?Y.minScrollY:aa.top<Y.maxScrollY?Y.maxScrollY:aa.top;Z=Z===undefined?R.max(R.abs(aa.left)*2,R.abs(aa.top)*2):Z;Y.scrollTo(aa.left,aa.top,Z)},scrollToPage:function(Z,Y,ab){var aa=this,X,ac;if(aa.options.onScrollStart){aa.options.onScrollStart.call(aa)}if(aa.options.snap){Z=Z=="next"?aa.currPageX+1:Z=="prev"?aa.currPageX-1:Z;Y=Y=="next"?aa.currPageY+1:Y=="prev"?aa.currPageY-1:Y;Z=Z<0?0:Z>aa.pagesX.length-1?aa.pagesX.length-1:Z;Y=Y<0?0:Y>aa.pagesY.length-1?aa.pagesY.length-1:Y;aa.currPageX=Z;aa.currPageY=Y;X=aa.pagesX[Z];ac=aa.pagesY[Y]}else{X=-aa.wrapperW*Z;ac=-aa.wrapperH*Y;if(X<aa.maxScrollX){X=aa.maxScrollX}if(ac<aa.maxScrollY){ac=aa.maxScrollY}}aa.scrollTo(X,ac,ab||400)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(P);this._unbind(G);this._unbind(T)},enable:function(){this.enabled=true},stop:function(){if(this.options.useTransition){this._unbind("webkitTransitionEnd")}else{N(this.aniTime)}this.steps=[];this.moved=false;this.animating=false},zoom:function(X,ac,ab,aa){var Y=this,Z=ab/Y.scale;if(!Y.options.useTransform){return}Y.zoomed=true;aa=aa===undefined?200:aa;X=X-Y.wrapperOffsetLeft-Y.x;ac=ac-Y.wrapperOffsetTop-Y.y;Y.x=X-X*Z+Y.x;Y.y=ac-ac*Z+Y.y;Y.scale=ab;Y.refresh();Y.x=Y.x>0?0:Y.x<Y.maxScrollX?Y.maxScrollX:Y.x;Y.y=Y.y>Y.minScrollY?Y.minScrollY:Y.y<Y.maxScrollY?Y.maxScrollY:Y.y;Y.scroller.style[V+"TransitionDuration"]=aa+"ms";Y.scroller.style[V+"Transform"]=D+Y.x+"px,"+Y.y+"px"+L+" scale("+ab+")";Y.zoomed=false},isReady:function(){return !this.moved&&!this.zoomed&&!this.animating}};if(typeof exports!=="undefined"){exports.iScroll=S}else{window.iScroll=S}})();function z(){var K=this,P,L,E,D,R,J=[],M,S,F=document.getElementsByTagName("head")[0],H={vScrollbar:true,hScroll:false},G;window.addEventListener("orientationchange",I,false);var O=function(){var V=$("."+E);return(V.length>0)};var Q=function(){if(T()){P.Log&&P.Log.info(P.Env.getInfo().platform+" "+P.Env.getInfo().version+" has fixed positioning so using position: fixed");S.css({position:"fixed",top:0,left:0,width:"100%","z-index":2});$contents.css({top:S.get(0).offsetHeight+"px",height:"auto","z-index":1})}else{P.Log&&P.Log.info(P.Env.getInfo().platform+" "+P.Env.getInfo().version+" has NO fixed positioning so using iScroll");if(J.length==0){document.body.addEventListener("touchmove",function(an){},false)}for(var ah=0,ai=$contents.length;ah<ai;ah++){var V=$contents[ah];var am=$(V);var ae=V.getAttribute("id");if(J[ae]){J[ae].refresh.call()}else{if(!(G.disableIScroll&&G.disableIScroll[ae])){am.css({visibility:"hidden",display:"block"});var al={};for(k in H){al[k]=H[k]}var X=$(V).children("*");var ad=X.length===1;if(!ad){var Y=document.createElement("div");Y.className=L+"created";Y.style.width="100%";for(var ah=0,ai=V.children.length;ah<ai;ah++){alert(V.children[ah]);Y.appendChild(V.children[ah])}V.appendChild(Y)}else{X[0].style.width="100%"}if(G.pullToRefresh===ae){var ak="touchy-pulldown",ab="touchy-pulldown-icon",af="touchy-pulldown-flip",ac="touchy-pulldown-loading",W="touchy-pulldown-label",ag={pull:"Pull down to refresh...",release:"Release to refresh...",loading:"Loading..."};var Z="#"+ak+" {     background:#000000;     height:40px;     line-height:40px;     padding:5px 10px;     font-weight:bold;     font-size:14px;     color:#888888;     visibility:hidden}#"+ak+" ."+ab+" {     display:block; float:left;     width:40px; height:40px;     background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAACgCAMAAACsXRuGAAAAt1BMVEX////FxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcU7SVrkAAAAPHRSTlMAAPONxyCMRvCjM2n59gzeD/xssVo52Akwh6sDpeTbckJLZroqfhUnRernVxifG9XDgb2ZzzxjeLThEmBcLCjmAAACDklEQVR4Xu2Y124yQQyFM9sh9BJafgik956/7fs/V4RCwiITbMdjCSGfKy4On7THnuLZ8yGTyRWUr1W54NgNIC4Dbm+VrQ+tbQxoQAMa0IAGnO4vtR44WBquCcBuJadrSslwQucNaBm2qbyHEQ3YqNN4l3fUKpdpMV7Q26ZF4T3S+5AU49OIA8RjvLpxDCAeY/PIcYB4jKf8tTzcxDt2fGBt/D3v19kPgK5fRQLkAt0MCZANdIdIgGxg7WBjgHygO1kTY/NVMla8QeBvJwHCGP84CRDG+PefBAhjrHTlo9n/InDiY9a7XfLazgewd//Jqze8AN15sAiw7Gu87XwAW/7m5ec5b+j8AXsveT6uSYAwxmrf7xNBZ+aYQJPJZDLh+20aRlkWhen8twdgnCyO0SCJfQDjUv6lUuwBmOQFJXJgGhSBQSoGhvmKQnFNo1VgBD3MmmarwAx6WDWFQOhh1RR+MvSwagqLwqw7/ndW3UkfCD2bhJcAephAvJGYn4y3OrMouIfZNriH19i4h7v0cI9ww4ce4ZEEPTt6/uJ+UdS4H28G1C9qV9yPLyjUL1vyuB/dlLh+dNtE/dpA+SdrF0XeNsqNLV96+puDfPvaaukfUvJjVP+gl19F9C9L8uuc/oVTfiXWv7TLxwr9wUc+msmHR/3xVj6A6z8RSBej/jMLp+76T1X6j2m7eP6aTO9STHV4CXebKAAAAABJRU5ErkJggg%3D%3D); 0 0 no-repeat;     -webkit-background-size:40px 80px; background-size:40px 80px;     -webkit-transition-property:-webkit-transform;     -webkit-transition-duration:250ms;     -webkit-transform:rotate(0deg) translateZ(0);}#"+ak+"."+af+" ."+ab+" {     -webkit-transform:rotate(-180deg) translateZ(0);}#"+ak+"."+ac+" ."+ab+" {     background-position:0 100%;     -webkit-transform:rotate(0deg) translateZ(0);     -webkit-transition-duration:0ms;     -webkit-animation-name:"+ac+";     -webkit-animation-duration:2s;     -webkit-animation-iteration-count:infinite;     -webkit-animation-timing-function:linear;}@-webkit-keyframes "+ac+" {     from { -webkit-transform:rotate(0deg) translateZ(0); }     to { -webkit-transform:rotate(360deg) translateZ(0); }}";s("style",F,{type:"text/css",innerHTML:Z});var aa='<div id="'+ak+'">    <span class="'+ab+'"></span>    <span class="'+W+'">'+ag.pull+"</span></div>";X.prepend(aa);$pullDownElement=$("#"+ak);$pullDownLabelClass=$pullDownElement.find("."+W);pullDownOffset=$pullDownElement[0].offsetHeight;var aj={onRefresh:function(){$pullDownElement.css("visibility","visible");$pullDownElement.removeAttr("class");$pullDownLabelClass.html(ag.pull)},onScrollMove:function(){if(this.y>5&&!$pullDownElement.hasClass(af)){$pullDownElement.addClass(af);$pullDownLabelClass.html(ag.release);this.minScrollY=0}else{if(this.y<5&&$pullDownElement.hasClass(af)){$pullDownElement.removeAttr("class");$pullDownLabelClass.html(ag.pull);this.minScrollY=-pullDownOffset}}},onScrollEnd:function(){if($pullDownElement.hasClass(af)){$pullDownElement.removeAttr("class");$pullDownLabelClass.html(ag.loading);if(doat_config.pullToRefreshCB){doat_config.pullToRefreshCB()}J[ae].refresh.call(J[ae])}},topOffset:pullDownOffset,useTransition:true};for(k in aj){al[k]=aj[k]}}J[ae]=new iScroll(ae,al);am.bind("touchstart",{id:ae},function(an){var ao=an.data.id;J[ao].refresh.call(J[ao])});am.css({display:"none",visibility:"visible"})}}}}};this.init=function(V){G=V;M=$(document.body);P=window.Doat||window.TouchyJS;L=window.Doat?"doml_":"touchyjs-";E=L+"content";D=L+"header";R=L+"scrollable";$contents=M.children("."+E);if($contents.length>0){I($contents);var W=G.displayContent||0,X=$contents[W];$(X).css("display","block");P.Nav.setCurrent(X)}};function N(){document.body.removeEventListener("touchstart",N);var V=P.Nav.getCurrent();$(V).css("height",window.screen&&window.screen.availHeight+"px"||"1000px");window.scrollTo(0,0);setTimeout(function(){K.refreshAll()},1000)}function I(W){W=W&&W.length?W:M.children("."+E);S=S||M.children("."+D);var V=S.length?S[0].offsetHeight:0,X=window.innerHeight-parseInt(M.css("margin-top"),10)-parseInt(M.css("margin-bottom"),10)-V;W.css({width:"100%",position:"absolute",height:X+"px",top:V+"px"});if(G.fixedPositioning){Q(G.fixedPositioning==="capableOnly")}}this.refresh=function(W,V){W=W||P.Nav.getCurrent().getAttribute("id");if(V){$("#"+W).children("*").css("height",V+"px")}if(J[W]){J[W].refresh()}};this.refreshAll=function(){I()};this.scrollTo=function(X){var V=P.Nav.getCurrent(),W=V.getAttribute("id");if(J[W]){J[W].scrollTo(0,X,0)}else{V.scrollTop=X}};this.disable=function(){var V=P.Nav.getCurrent(),W=V.getAttribute("id");if(J[W]){J[W].disable()}};this.enable=function(){var V=P.Nav.getCurrent(),W=V.getAttribute("id");if(J[W]){J[W].enable()}};var T=function(){if(!P.Env.isMobile()){return true}var V=P.Env.getInfo();p=V.platform,v=V.version;if(p==="iphone"||p==="ipad"){return U(v,"5")}else{if(p==="android"){return U(v,"2.2")}}return false};function U(Z,Y){var X=Z.split(".");var W=Y.split(".");for(var V=0;V<X.length;++V){if(W.length==V){return true}if(X[V]==W[V]){continue}else{if(parseInt(X[V],10)>parseInt(W[V],10)){return true}else{return false}}}if(X.length!=W.length){return false}return true}}function e(D,I,H){H&&H.info("platform="+D);var E=["scale","rotate","skew","translate","matrix"],G=I==="webkit"?"-webkit-":I==="mozilla"?"-moz-":"";J();$.fn.fadeIn=function(){var M=j(arguments);return $(this).animate({opacity:1},M.dur,M.ease,M.cb)};$.fn.fadeOut=function(){var M=j(arguments);return $(this).animate({opacity:0},M.dur,M.ease,M.cb)};$.fn.animate=function(){var U=this;var P,S,M,O,R=[];for(var Q=1;Q<arguments.length;Q++){var T=arguments[Q];if(typeof T==="function"){R.push(T)}else{if(T==="fast"||T==="slow"){M=T}else{if(typeof T==="string"){O=T}else{M=T}}}}S=arguments[0];S[G+"transform"]="";for(P in S){var N;if(S[P].toString().indexOf("=")!==-1){S[P]=L(U,P,S[P])}if(F(P)){S[G+"transform"]+=P+"("+S[P]+")";delete S[P]}else{if(P==="left"||P==="right"){N=(P==="right")?K(S[P]):S[P];S[G+"transform"]+="translateX("+N+")";delete S[P]}else{if(P==="bottom"||P==="top"){N=(P==="bottom")?K(S[P]):S[P];S[G+"transform"]+="translateY("+N+")";delete S[P]}}}}M=(M==="fast")?0.2:(M==="slow")?0.6:M/1000||0.3;O=(!O||O==="swing")?"ease-in-out":O;if(R.length>0){setTimeout(function(){var W,V=R.length;for(W=0;W<V;W++){R[W].call(U)}},M*1000)}S[G+"transition"]="all "+M+"s "+O;return U.css(S)};function F(M){for(var N=0;N<E.length;N++){if(M.indexOf(E[N])!==-1){return true;break}}return false}function K(M){M=M.toString();return(M.indexOf("-")===0)?M.substring(1,M.length):"-"+M}function L(N,Q,P){var T=(P.indexOf("-=")!==-1)?-1:1;P=P.toString();var M=parseInt(P.substring(2,P.length),10).toString();var O=P.substring(2+M.length,P.length);var S=N.css(Q);S=(S&&S!=="")?parseInt(S,10):0;var R=S+(T*M)+O;return R}function J(){var M={};if(D!=="android"){M[G+"transform"]="translate3d(0px, 0px, 0px) rotate(0deg) scale(1)";M[G+"box-sizing"]="border-box";M[G+"backface-visibility"]="hidden";H&&H.info("Including cfg['"+G+"transform'] = 'translate3d(0px, 0px, 0px) rotate(0deg) scale(1)'")}else{H&&H.info("not including cfg['"+G+"transform'] = 'translate3d(0px, 0px, 0px) rotate(0deg) scale(1)'")}$(".doml_content").css(M)}}function j(E){var G={};for(var F=0;F<E.length;F++){var D=E[F];if(typeof D==="function"){G.cb=D}else{if(D==="fast"||D==="slow"){G.dur=D}else{if(typeof D==="string"){G.ease=D}else{G.dur=D}}}}return G}
/*!
             * JS Signals <http://millermedeiros.github.com/js-signals/>
             * Released under the MIT license <http://www.opensource.org/licenses/mit-license.php>
             * @author Miller Medeiros <http://millermedeiros.com/>
             * @version 0.6.3
             * @build 187 (07/11/2011 10:14 AM)
             */
(function(F){var D={VERSION:"0.6.3"};function G(H,I,K,J,L){this._listener=I;this._isOnce=K;this.context=J;this._signal=H;this._priority=L||0}G.prototype={active:true,params:null,execute:function(J){var H,I;if(this.active&&!!this._listener){I=this.params?this.params.concat(J):J;H=this._listener.apply(this.context,I);if(this._isOnce){this.detach()}}return H},detach:function(){return this.isBound()?this._signal.remove(this._listener):null},isBound:function(){return(!!this._signal&&!!this._listener)},getListener:function(){return this._listener},_destroy:function(){delete this._signal;delete this._listener;delete this.context},isOnce:function(){return this._isOnce},toString:function(){return"[SignalBinding isOnce: "+this._isOnce+", isBound: "+this.isBound()+", active: "+this.active+"]"}};function E(I,H){if(typeof I!=="function"){throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",H))}}D.Signal=function(){this._bindings=[]};D.Signal.prototype={_shouldPropagate:true,active:true,_registerListener:function(I,J,K,L){var M=this._indexOfListener(I),H;if(M!==-1){H=this._bindings[M];if(H.isOnce()!==J){throw new Error("You cannot add"+(J?"":"Once")+"() then add"+(!J?"":"Once")+"() the same listener without removing the relationship first.")}}else{H=new G(this,I,J,K,L);this._addBinding(H)}return H},_addBinding:function(I){var H=this._bindings.length;do{--H}while(this._bindings[H]&&I._priority<=this._bindings[H]._priority);this._bindings.splice(H+1,0,I)},_indexOfListener:function(I){var H=this._bindings.length;while(H--){if(this._bindings[H]._listener===I){return H}}return -1},add:function(H,I,J){E(H,"add");return this._registerListener(H,false,I,J)},addOnce:function(H,I,J){E(H,"addOnce");return this._registerListener(H,true,I,J)},remove:function(H){E(H,"remove");var I=this._indexOfListener(H);if(I!==-1){this._bindings[I]._destroy();this._bindings.splice(I,1)}return H},removeAll:function(){var H=this._bindings.length;while(H--){this._bindings[H]._destroy()}this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=false},dispatch:function(J){if(!this.active){return}var K=Array.prototype.slice.call(arguments),H=this._bindings.slice(),I=this._bindings.length;this._shouldPropagate=true;do{I--}while(H[I]&&this._shouldPropagate&&H[I].execute(K)!==false)},dispose:function(){this.removeAll();delete this._bindings},toString:function(){return"[Signal active: "+this.active+" numListeners: "+this.getNumListeners()+"]"}};F.signals=D}(window||this));
/*!
 * Hasher <http://github.com/millermedeiros/hasher>
 * @author Miller Medeiros
 * @version 1.0.0 (2011/08/03 10:49 PM)
 * Released under the MIT License
 */
var f=(function(V){var R=25,Q=V.document,ad=V.location,S=V.history,K=signals.Signal,aa,L,T,N,ab,E,O=/#(.*)$/,W=/(\?.*)|(\#.*)/,Z=/^\#/,X=(!+"\v1"),G=("onhashchange" in V),ac=X&&!G,P=(ad.protocol==="file:");function M(ae){if(!ae){return""}var af=new RegExp("^\\"+aa.prependHash+"|\\"+aa.appendHash+"$","g");return ae.replace(af,"")}function D(){var ae=O.exec(aa.getURL());return(ae&&ae[1])?decodeURIComponent(ae[1]):""}function H(){return(ab)?ab.contentWindow.frameHash:null}function I(){ab=Q.createElement("iframe");ab.src="about:blank";ab.style.display="none";Q.body.appendChild(ab)}function Y(){if(ab&&L!==H()){var ae=ab.contentWindow.document;ae.open();ae.write("<html><head><title>"+Q.title+'</title><script type="text/javascript">var frameHash="'+L+'";<\/script></head><body>&nbsp;</body></html>');ae.close()}}function U(af){af=decodeURIComponent(af);if(L!==af){var ae=L;L=af;if(ac){Y()}aa.changed.dispatch(M(af),M(ae))}}E=(ac)?function(){var ae=D(),af=H();if(af!==L&&af!==ae){aa.setHash(M(af))}else{if(ae!==L){U(ae)}}}:function(){var ae=D();if(ae!==L){U(ae)}};function F(ae,ag,af){if(ae.addEventListener){ae.addEventListener(ag,af,false)}else{if(ae.attachEvent){ae.attachEvent("on"+ag,af)}}}function J(ae,ag,af){if(ae.removeEventListener){ae.removeEventListener(ag,af,false)}else{if(ae.detachEvent){ae.detachEvent("on"+ag,af)}}}aa={VERSION:"1.0.0",appendHash:"",prependHash:"/",separator:"/",changed:new K(),stopped:new K(),initialized:new K(),init:function(){if(N){return}L=D();if(G){F(V,"hashchange",E)}else{if(ac){if(!ab){I()}Y()}T=setInterval(E,R)}N=true;aa.initialized.dispatch(M(L))},stop:function(){if(!N){return}if(G){J(V,"hashchange",E)}else{clearInterval(T);T=null}N=false;aa.stopped.dispatch(M(L))},isActive:function(){return N},getURL:function(){return ad.href},getBaseURL:function(){return aa.getURL().replace(W,"")},setHash:function(af){var ae=Array.prototype.slice.call(arguments);af=ae.join(aa.separator);af=af?aa.prependHash+af.replace(Z,"")+aa.appendHash:af;if(af!==L){U(af);if(X&&P){af=af.replace(/\?/,"%3F")}ad.hash="#"+encodeURI(af)}},getHash:function(){return M(L)},getHashAsArray:function(){return aa.getHash().split(aa.separator)},dispose:function(){aa.stop();aa.initialized.dispose();aa.stopped.dispose();aa.changed.dispose();ab=aa=V.hasher=null},toString:function(){return'[hasher version="'+aa.VERSION+'" hash="'+aa.getHash()+'"]'}};return aa}(window));var x=function(){var aa=typeof a!="undefined"?a:TouchyJS,T=typeof a!="undefined"?"doml_":"touchyjs-",R=aa.Env.isMobile(),W,P,F,J={},D={},Q={},ad,S=true,M=false,L;var ac=aa.Env.getInfo().browser.name||aa.Env.getInfo().browser;ad=ac==="webkit"?"-webkit-":ac==="mozilla"?"-moz-":"";var V=function(ag){ag&&(J=l(J,ag));if(J.browserHistory){N()}};var E=function(){var ah=arguments;var ai=(typeof ah[0]==="string")?ah[0]:ah[0].get?ah[0].get(0).getAttribute("id"):ah[0].getAttribute("id"),ak=ah[1],aj=(typeof ah[2]==="string")?ah[2].toLowerCase():"oncomplete",ag=(typeof ah[2]==="string")?ah[3]:ah[2];D[ai]=D[ai]||{};D[ai][aj]=D[ai][aj]||{};D[ai][aj][ak]=ag};var Z=function(an,ao,ah){if(!an||M){return false}M=true;var am=(an.constructor===String)?$("."+T+"content#"+an):$(an);if(!ah){Y(am,ao)}if(W[0].id==am[0].id&&W.css("display")=="block"){ab(am,ao);return false}else{if(ao&&ao.transition=="none"){var aj={left:"0%",display:"block"};aj[ad+"transition-duration"]="0";aj[ad+"transform"]="translateX(0)";am.css(aj);W.css({display:"none"});ab(am,ao)}else{if(ao&&ao.transition=="fade"){am.css(ad+"transition","opacity 0.5s linear");am.css({display:"block",opacity:1});W.css(ad+"transition","opacity 0.5s linear");W.css({opacity:0});ab(am,ao)}else{var al=ao&&ao.direction||ae(am),ag=(al==="rtl")?"100%":"-100%",ai=(al==="rtl")?"-100%":"100%";if(R){am.css(ad+"transition-duration","0");am.css(ad+"transform","translateX("+ag+")")}else{am.css("left",ag)}am.css("display","block");setTimeout(function(){am.animate({left:"0%"});W.animate({left:ai},function(){ab(am,ao)})},200)}}}if(!ao||ao.muteEventReport!==true){var ak={action:"Navigate",to:am[0].id};if(ao&&ao.title){ak.title=ao.title.replace("/","-")}if(ao&&ao.id&&ao.id.replace){ak.id=ao.id.replace("/","-")}if(aa.Messenger){aa.Messenger.trigger(aa.Events.USER_ACTION,ak)}}return true};var U=function(){if(J.browserHistory){history.back()}else{af(P,{muteEventReport:true})}};var af=function(ai,ah,aj){if(J.browserHistory){var ag=(ai.constructor===String)?$("."+T+"content#"+ai):$(ai);var ak="";if(ah){if(ah.url){ak="/"+ah.url}else{if(ah.id){ak="/"+ah.id}}}f.setHash(ag[0].id+ak)}else{Z.apply(this,arguments)}};var Y=function(ag,ah){var aj=W[0].id,ai=ag[0].id;if(aj!=ai){if(D[ai]&&D[ai]["onstart"]&&D[ai]["onstart"]["in"]){D[ai]["onstart"]["in"](W[0],ag[0])}if(D[aj]&&D[aj]["onstart"]&&D[aj]["onstart"]["out"]){D[aj]["onstart"]["out"](W[0],ag[0])}}if(ah&&ah.onStart){ah.onStart(W[0],ag[0])}};var ab=function(ag,ah){var aj=W[0].id,ai=ag[0].id;P=W;W=ag;if(aj!=ai){P.css("display","none");if(D[ai]&&D[ai]["oncomplete"]&&D[ai]["oncomplete"]["in"]){D[ai]["oncomplete"]["in"](W[0],P[0])}if(D[aj]&&D[aj]["oncomplete"]&&D[aj]["oncomplete"]["out"]){D[aj]["oncomplete"]["out"](W[0],P[0])}}if(ah&&ah.onComplete){ah.onComplete(W[0],P[0])}M=false};var ae=function(ag){var ah=G(ag);var ai=(ah&&ah!==""&&ah!=="none")?(ah==="translateX(-100%)"):(ag.get(0).style.left==="-100%");return ai?"ltr":"rtl"};var G=function(ah){var ag=ah.css(ad+"transform"),ai=ah[0].style[ad+"transform"];return ag&&ag!==""&&ag!=="none"?ag:ai};var I=function(ag){if(ag.constructor===String){W=$("#"+ag)}else{W=$(ag)}!L&&(L=ag.id)};var K=function(){return W[0]};var X=function(){if(W&&F!==W[0].offsetHeight){F=W[0].offsetHeight;return F}return false};var H=function(ai,ah){if(typeof ai=="function"){ah=ai;ai=["__default"]}else{if(typeof ai=="string"){if(ai==""){ai="__empty"}ai=[ai]}}for(var ag=0;ag<ai.length;ag++){var aj=ai[ag];if(!Q[aj]){Q[aj]=[]}Q[aj].push(ah)}};var O=function(ai){var ak=ai.split("/"),aj="__empty";if(ak.length>0&&ak[0]!=""){aj=ak[0]}ak.splice(0,1);if(!Q[aj]){Q[aj]=[]}if(!Q.__default){Q.__default=[]}var ag=Q[aj].concat(Q.__default);if(aj=="__empty"){aj=L}if(S){Z(aj,{transition:"none"},true);S=false}else{Z(aj,{},true)}for(var ah=0;ah<ag.length;ah++){ag[ah](aj,ak)}};var N=function(){f.changed.add(O);f.initialized.add(O);f.init()};return{init:V,goTo:af,back:U,attachCallback:E,initAddress:N,changed:H,setCurrent:I,getCurrent:K,hasNewContentHeight:X,Indicator:new g()}};function g(){var G,I,E,J={lines:10,length:7,width:3,radius:7,color:"#ffffff",speed:1.4,trail:72,shadow:true,parent:document.body},D={position:"absolute",left:"50%",top:"150px","z-index":200};var H=function(L){var K={};for(i in J){K[i]=J[i]}for(i in L){K[i]=L[i]}I=new Spinner(K);I.spin(K.parent)};var F=function(){$mainEl=$('<span class="touchyjs-progress-indicator" />');$mainEl.css(D);$(document.body).append($mainEl);E=$mainEl[0];G=new Spinner(J)};this.show=function(K){if(K){H(K)}else{if(!G){F()}G.spin(E)}};this.hide=function(){if(I){I.stop()}if(G){G.stop()}}}function s(F,L,J,M,H){var K=L?L.ownerDocument:document;var E=K.createElement(F);if(J){for(var D in J){if(D=="style"){var O=J[D];for(var P in O){E.style.setProperty(P,O[P])}}else{E[D]=J[D]}}}if(M&&F=="script"){var G=false;var N=function(){if(G){return}G=true;M()};E.onload=N;E.onreadystatechange=function(){if(this.readyState=="loaded"){N()}}}if(L){try{L.insertBefore(E,H)}catch(I){L.insertBefore(E)}}return E}function m(){var D={};(location.search||"").replace(/(?:[?&]|^)([^=]+)=([^&]*)/g,function(G,F,E){D[F]=E});return D}function n(H,F,G){var D=function(K,I,J){K[J]=function(){return I[J].apply(I,arguments)}};for(var E in G){D(H,F,G[E])}}function c(D){if(!D){return D}var F=D.length,H=[],G={};while(F--){var E=D[F];if(!G[E]){G[E]=true;H.push(E)}}return H}function l(F,E){F=F||{};for(var D in E){F[D]=E[D]}return F}function t(F,D){var E=F.className;D=E!==""?" "+D:D;F.className+=D}function y(D){if(D.trim){return D.trim()}else{return D.replace(/^\s+|\s+$/g,"")}}function r(){if(typeof arguments[0]==="string"){arguments[2]=arguments[1];arguments[1]=arguments[0];arguments[0]=document}var F=arguments[0],E=arguments[1],D=arguments[2];if(typeof F.addEventListener!=="undefined"){F.addEventListener(E,D,false)}else{if(F.attachEvent){F.attachEvent("on"+E,D,false)}}}function h(){if(typeof arguments[0]==="string"){arguments[2]=arguments[1];arguments[1]=arguments[0];arguments[0]=document}var F=arguments[0],E=arguments[1],D=arguments[2];if(typeof F.removeEventListener!=="undefined"){F.removeEventListener(E,D,false)}else{if(F.detachEvent){F.detachEvent("on"+E,D)}}}function u(){var T=this,J,Q=document.getElementsByTagName("HEAD")[0],K,P,G,H,F,L,E,R,O={};if(typeof doat_config!=="undefined"){O=l(O,doat_config)}this.init=S;this.renderHTML=M;this.openLink=I;this.getSearchQuery=D;this.visible=this.focused=false;this.Log=typeof Logger!=="undefined"&&new Logger()||null;this.Events=new A();P=new C();this.Env=this.Environment=P;R=P.getInfo();if(P.isMobile()){s("META",Q,{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;"});if(R.platform.name==="iphone"){s("META",Q,{name:"apple-mobile-web-app-capable",content:"yes"})}}var N=function(Y,V){if(!V){return Y}for(var U in V){var X=new RegExp("{"+U+"}","g");var W=V[U];Y=Y.replace(X,W)}return Y};function S(){J=$(document);K=new d();T.DOML=K;H=new b({searchClearButton:O.searchClearButton});T.Searchbar=H;L=new q();T.Slider=L;E=new B();T.Swiper=E;F=new z();T.Scroll=F;G=new x();T.Navigation=T.Nav=G;T.Events.focused(function(){O.hasHost=true;T.focused=true});T.Events.blurred(function(){T.focused=false});T.Events.visible(function(){T.visible=true});T.Events.hidden(function(){T.visible=false});J.ready(function(){K.parse();F.init(O);G.init(O);t(document.body,"doml-env-"+R.platform.name);if(P.isMobile()){t(document.body,"doml-env-mobile");if(O.webkitAnimation!==false){e(R.platform.name,R.browser.name,T.Log)}}$("body").bind("click",function(X){var W=X.target||X.originalTarget;var V="";if(W){if(W.nodeName){V=W.nodeName}if(W.className!=""){V+="."+W.className}if(W.id!=""){V+="#"+W.id}if(W.firstChild&&W.firstChild.nodeType===3){var Z=W.firstChild.nodeValue;Z=y(Z);if(Z!==""){V+=' ("'+Z+'")'}}if(W.getAttribute("alt")&&W.getAttribute("alt")!==""){var Y=W.getAttribute("alt");Y=y(Y);V+=' ("'+Y+'")'}}});T.Events.dispatchEvent("ready",{callOnce:true})});var U=m();T.params={};T.params.query=U.do_query?decodeURIComponent(U.do_query):"";T.params.experience=U.do_experience?decodeURIComponent(U.do_experience):"";T.params.platform=U.do_platform?U.do_platform:"";T.params.attributes=U.do_attr?JSON.parse(decodeURIComponent(U.do_attr)):{}}function D(){return T.params.query}function M(Z,Y){var V;if(typeof Z==="string"){V=Z}else{var aa="",U=P.getInfo().platform;for(k in Z){var X=k.split(",");for(var W=0;W<X.length;W++){if(X[W]===U){V=Z[k];break}else{if(X[W]==="default"){aa=Z[k]}}}if(!V){V=aa}}}return N(V,Y)}function I(ag,aj){var Y,Z=P.getInfo().platform,ah=P.isMobile(),ak=aj||{};function ab(al){return encodeURIComponent(encodeURIComponent(al))}function ac(al){if(typeof al==="string"){al={url:al,newWindow:(!ah),label:((al.indexOf("itms-apps://")!==-1||al.indexOf("itms://")!==-1||al.indexOf("http://itunes.apple.com")!==-1)?"Download from App Store":(al.indexOf("http://")!==0&&al.indexOf("https://")!==0)?"Launch installed app":al)}}return al}function af(am){if(!am){return am}var ao;am=(am instanceof Array)?am:[am];if(ah){ao={url:"doatJS://OpenLink"};for(var an=0,al=am.length;an<al;an++){var ap=ac(am[an]);if(ap.newWindow&&ap.url.indexOf("http")===0){ap.url="doatBrowser://"+ap.url}ap.url=ab(ap.url);ao.url+="/"+ap.url}}else{ao=ac(am[0])}return ao}for(platform in ag){var aa=platform.split(",");for(var ad=0,X=aa.length;ad<X;ad++){if(y(aa[ad])===Z){Y=ag[platform];break}}if(Y){break}}if(O.hasHost===true){Y=af(Y||ag["default"]);if(Y){if(ak.debug){return Y.url}else{if(!ah&&Y.newWindow){window.open(Y.url,"_blank","status=no")}else{location.href=Y.url}return true}}}else{var ai=document.getElementById("alertView");if(!ai){var V="#doatOpenWin ul { list-style-type: none; }#doatOpenWin ul li { padding: 6px 0; }#doatOpenWin ul li a { color: #fff; text-decoration: none; font-size: 13px; }#alertView{text-align: center;width: 250px;position: absolute;left: 50%;margin-left: -135px;border: 2px solid #fff;border-radius: 20px;-moz-border-radius: 20px;-webkit-border-radius: 20px;background:  rgba(59, 80, 119, 0.9) ;box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.5);-moz-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.5);-webkit-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.5);overflow:hidden;z-index:1000;padding:10px;display:none;}#alertView div#shine {position: absolute;top: -1474px;height: 1500px;width: 1500px;border-radius: 1500px;-moz-border-radius: 1500px;-webkit-border-radius: 1500px;background: rgb(255, 255, 255);left: -626px;background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgba(59,81,119, 0.5)),color-stop(0.06, rgba(255,255,255, 0.5)));background:   -moz-linear-gradient(center bottom,rgba(59,81,119, 0.5) 0%,rgba(255,255,255, 0.5) 4%);opacity: 1;filter: alpha(opacity = 05);z-index: 5;}#alertView h2, #alertView p{color: white;margin: 0;padding: 5px 10px;font: 12px / 1.1em Helvetica, Arial, sans-serif;position: relative;z-index: 20;}#alertView h2{text-align:center;font: 18px / 1.1em Helvetica, Arial, sans-serif;}#alertView div.button.white{background: -webkit-gradient(linear,left bottom,left top,color-stop(0.13, rgb(62,73,101)),color-stop(0.43, rgb(62,73,101)),color-stop(1, rgb(221,222,224)));background: -moz-linear-gradient(center bottom,rgb(62,73,101) 13%,rgb(62,73,101) 43%,rgb(221,222,224) 100%);}#alertView div.button{margin: 0 auto 6px;background: rgb(69, 90, 129);border: 1px solid rgb(59, 80, 119);border: 1px solid rgba(59, 80, 119, 1);border-radius: 5px;-moz-border-radius: 5px;-webkit-border-radius: 5px;background: -webkit-gradient(linear,left bottom,left top,color-stop(0.13, rgb(62,73,101)),color-stop(0.43, rgb(62,73,101)),color-stop(1, rgb(221,222,224)));background: -moz-linear-gradient(center bottom,rgb(62,73,101) 13%,rgb(62,73,101) 43%,rgb(221,222,224) 100%);}#alertView div.button p{text-align: center;margin: 0;padding: 0;}#alertView div.button p a{color: #333333;color: rgba(255, 255, 255, 1);text-decoration: none;font: bold 14px/1.2em Helvetica, Arial, sans-serif;margin: 0;display: block;padding: 7px 0 10px;text-shadow: 0 1px 1px #5E5E5E;border-radius: 5px;-moz-border-radius: 5px;-webkit-border-radius: 5px;}#alertView div.button p a:active {-moz-box-shadow: 0 0 15px white;-webkit-box-shadow: 0 0 15px white;}";s("style",Q,{innerHTML:V});var W=document.createElement("div");W.id="doatOpenWin";var ai=document.createElement("div");ai.id="alertView";var ae="<h2>Launching "+document.title+" app</h2>";for(var ad=0;ad<Y.length;ad++){var U=ac(Y[ad]);ae+='<div class="button"><p><a href="'+U.url+'" '+((U.newWindow)?'target="_blank"':"")+">"+U.label+"</a></p></div>"}ae+='<div class="button" id="cancelButton"><p><a href="javascript://">Cancel</a></p></div>';ae+='<div id="shine"></div>';ai.innerHTML=ae;W.appendChild(ai);document.body.appendChild(W);W.querySelector("#cancelButton").addEventListener("click",function(){ai.style.display="none"},false)}ai.style.display="block";ai.style.top=document.body.scrollTop+40+"px"}}}var a=new u();if(!window.doat_config||!doat_config.manualInit){a.init()}window.Doat=a})();